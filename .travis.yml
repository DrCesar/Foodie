language": node_js
sudo": required
node_js: 6.11.3
install: npm install
jobs:
  include:
    - stage: Clean Admin
      script:
        - cd Admin
        - npm install
        - npm run clean

    - stage: Unit Tests Admin
      script:
        #Display Firefox
        - export DISPLAY=:99.0
        - sh -e /etc/init.d/xvfb start

    - stage: e2e Tests Admin
      script:
        #Display Firefox
        - export DISPLAY=:99.0
        - sh -e /etc/init.d/xvfb start
        - cd Admin
        - npm run build
        - ionic serve &
        - npm run e2e
    
    - stage: Start Server
      script:
        - cd server
        - npm install
        - nodemon server.js &
    - stage: Unit Tests Server
      script:
        #Display Firefox
        - export DISPLAY=:99.0
        - sh -e /etc/init.d/xvfb start

    - stage: e2e Tests Server
      script:
        #Display Firefox
        - export DISPLAY=:99.0
        - sh -e /etc/init.d/xvfb start
group: stable
dist: trusty
os: linux
